# discuss.watch QA Improvements Log

**Date**: 2026-02-17
**Tested on**: discuss-dot-watch-production.up.railway.app
**Tested by**: Claude (browser automation QA)

---

## Summary

Comprehensive QA review of all major features. The app is in good shape overall — most features work correctly. Found 1 high-priority layout bug, several cosmetic issues, and a few UX improvement opportunities.

**Features tested**: Feed, Filters (category/date/forum/sort), Search, Inline Reader, Briefs (daily/weekly), Communities, Saved/Bookmarks, Settings, Theme toggle, Keyword Alerts, Command Menu, Admin dashboard, Mobile responsive layout, Landing page, API v1 endpoints, Auth (signed in as admin).

---

## Bugs

### 1. [HIGH] Inline reader text overflow — content cut off on right edge
- **Where**: `DiscussionReader` component, desktop view
- **Repro**: Open any discussion with long paragraph text or URLs
- **Expected**: Text wraps within the 480px reader panel
- **Actual**: Text extends past the right edge of the panel and is clipped. Title, paragraph text, and URLs all overflow. Some lines cut mid-word ("privacy-preserv", "lookahe").
- **Impact**: Users cannot read full post content without opening the external link
- **Fix**: Add `overflow-wrap: break-word` and/or `word-break: break-word` to the reader content container. Ensure `max-width: 100%` on inner elements. The `.discourse-content` CSS class in `globals.css` may need updated overflow rules. The reader panel container itself may need `overflow-x: hidden`.
- **Files**: `src/components/DiscussionReader.tsx`, `src/app/globals.css`

### 2. [LOW] "Ai Discussions" heading capitalization
- **Where**: Feed heading when AI category filter is selected
- **Repro**: Click the "AI 1" category tab in the filter bar
- **Expected**: Heading reads "AI Discussions"
- **Actual**: Heading reads "Ai Discussions" (lowercase 'i')
- **Fix**: The category name is likely being title-cased from a lowercase source. Ensure the display name for the AI category is "AI" not "Ai".
- **Files**: `src/components/DiscussionFeed.tsx` or `src/lib/forumPresets.ts` (wherever the category display name is generated)

### 3. [LOW] Excerpt truncation cuts mid-word
- **Where**: Discussion cards with excerpts in the feed
- **Repro**: Sort by Views, look at Lido Finance "Welcome to Lido DAO" card — excerpt ends with "stak" instead of "staking"
- **Expected**: Excerpt truncates at a word boundary
- **Actual**: Truncates at exactly 200 characters regardless of word boundaries
- **Fix**: Truncate to the last complete word before the 200-char limit, then append "..."
- **Files**: `src/app/api/discourse/route.ts` (where excerpt is generated from Discourse HTML)

---

## UX Improvements

### 4. [MEDIUM] Unread count doesn't update with category filter
- **Where**: Feed subtitle ("X unread across Y forums")
- **Repro**: Click "Crypto 15" or "AI 1" category tab
- **Expected**: Subtitle shows unread count for the filtered category only
- **Actual**: Always shows global unread count (e.g., "474 unread across 16 forums" even when viewing only AI)
- **Suggestion**: Compute filtered unread count based on active category, or hide the count when filtered

### 5. [LOW] Empty system posts render in inline reader
- **Where**: `DiscussionReader` when viewing topics that have Discourse system posts
- **Repro**: Open "Paper authorship claim denied? Need Help" from Hugging Face
- **Expected**: Empty system posts (auto-generated by Discourse) are hidden or collapsed
- **Actual**: System posts with no content still render with avatar + username + timestamp, taking vertical space
- **Suggestion**: Filter out posts where `content` is empty or where `username === 'system'` and content is only whitespace/HTML tags
- **Files**: `src/components/DiscussionReader.tsx`

### 6. [LOW] Admin users table shows Privy DIDs instead of emails
- **Where**: Admin dashboard → Users section
- **Repro**: Navigate to /admin, scroll to Users table
- **Expected**: User email addresses shown for all users
- **Actual**: 5 of 8 users show `did:privy:cmlr4hpkk0...` instead of email addresses (users who authenticated via wallet)
- **Suggestion**: Resolve email from Privy user metadata where available, or show login method alongside the DID
- **Files**: `src/app/admin/page.tsx`, `src/app/api/admin/route.ts`

### 7. [LOW] "All Forums" tab shows same forum count as "Your Forums"
- **Where**: Feed view, top tabs
- **Repro**: Click "All Forums (19)" tab — subtitle still shows "across 16 forums" not 19
- **Expected**: When viewing "All Forums", data from all 19 added forums should be included (including 3 disabled ones)
- **Actual**: Appears to show the same data as "Your Forums (16)"
- **Suggestion**: Clarify what "All Forums" means — if it includes disabled forums, fetch data for those too. If it means "all preset forums", make it show preset forum data.
- **Files**: `src/hooks/useDiscussions.ts`, `src/app/page.tsx`

---

## Working Correctly (No Issues Found)

- **Feed loading** — Topics load from 16 forums, refresh works, per-forum loading states
- **Category filters** — Crypto/AI tabs filter correctly, counts accurate
- **Date filters** — Created/Activity toggle, All/Today/Week/Month all work
- **Forum source filter** — "All forums" / specific forum dropdown works
- **Sort options** — Recent/Replies/Views/Likes sort correctly
- **Search** — Debounced search filters discussions by title, clear button works
- **Keyword alerts** — Add/remove keywords, filter feed, bold highlighting in titles
- **Bookmarking** — Add/remove bookmarks, count badge on Saved nav item, Saved view shows bookmarks
- **Read/unread tracking** — Auto-marks on open, dimmed title styling, unread count decrements
- **Theme toggle** — Dark/light mode, persists correctly, clean transitions
- **Briefs view** — Daily/weekly toggle, AI summaries, New Conversations/Trending/Delegate Corner sections
- **Communities view** — Your Forums list, Browse All with categories, forum counts, Add Custom Forum
- **Settings view** — About, Data usage, Import/Export, Email Digest prefs, Keyboard shortcuts ref
- **Command menu** — Cmd+K opens, categories + sort options, keyboard nav hints
- **Admin dashboard** — DB/Redis/Memory status, Forum Analytics, Forum Health, Users table, Sync from Privy
- **Mobile responsive** — Hamburger menu, collapsible sidebar, floating search, full-screen reader overlay
- **Landing page** — Hero, three verticals, feature cards, API section, footer
- **API v1** — Root endpoint, forums, categories all return correct JSON
- **Auth** — Signed in state, admin access, Sign Out button
- **Escape key** — Closes reader and command menu correctly
